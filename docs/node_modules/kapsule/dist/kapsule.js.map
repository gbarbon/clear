{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 72b6d2c90ed220663327","webpack:///./index.js","webpack:///./node_modules/debounce/index.js"],"names":["stateInit","props","rawProps","methods","aliases","init","initFn","update","updateFn","Object","keys","map","Prop","propName","options","state","assign","Function","initialised","comp","nodeElement","initStatic","digest","call","forEach","prop","name","getSetProp","triggerUpdate","onChange","redigest","newVal","_","arguments","length","methodName","args","entries","alias","target","resetProps","defaultVal","_rerender","default"],"mappings":"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","file":"kapsule.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Kapsule\"] = factory();\n\telse\n\t\troot[\"Kapsule\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 72b6d2c90ed220663327","import debounce from 'debounce';\n\nclass Prop {\n  constructor(name, {\n    default: defaultVal = null,\n    triggerUpdate = true,\n    onChange = (newVal, state) => {}\n  }) {\n    this.name = name;\n    this.defaultVal = defaultVal;\n    this.triggerUpdate = triggerUpdate;\n    this.onChange = onChange;\n  }\n}\n\nexport default function ({\n  stateInit = (() => ({})),\n  props: rawProps = {},\n  methods = {},\n  aliases = {},\n  init: initFn = (() => {}),\n  update: updateFn = (() => {})\n}) {\n\n  // Parse props into Prop instances\n  const props = Object.keys(rawProps).map(propName =>\n    new Prop(propName, rawProps[propName])\n  );\n\n  return function(options = {}) {\n\n    // Holds component state\n    let state = Object.assign({},\n        stateInit instanceof Function ? stateInit() : stateInit, // Support plain objects for backwards compatibility\n        { initialised: false }\n    );\n\n    // Component constructor\n    function comp(nodeElement) {\n      initStatic(nodeElement, options);\n      digest();\n\n      return comp;\n    }\n\n    const initStatic = function(nodeElement, options) {\n      initFn.call(comp, nodeElement, state, options);\n      state.initialised = true;\n    };\n\n    const digest = debounce(() => {\n      if (!state.initialised) { return; }\n      updateFn.call(comp, state);\n    }, 1);\n\n    // Getter/setter methods\n    props.forEach(prop => {\n      comp[prop.name] = getSetProp(prop.name, prop.triggerUpdate, prop.onChange);\n\n      function getSetProp(prop, redigest = false,  onChange = (newVal, state) => {}) {\n        return function(_) {\n          if (!arguments.length) { return state[prop] } // Getter mode\n          state[prop] = _;\n          onChange.call(comp, _, state);\n          if (redigest) { digest(); }\n          return comp;\n        }\n      }\n    });\n\n    // Other methods\n    Object.keys(methods).forEach(methodName => {\n      comp[methodName] = (...args) => methods[methodName].call(comp, state, ...args);\n    });\n\n    // Link aliases\n    Object.entries(aliases).forEach(([alias, target]) => comp[alias] = comp[target]);\n\n    // Reset all component props to their default value\n    comp.resetProps = function() {\n      props.forEach(prop => {\n        comp[prop.name](prop.defaultVal);\n      });\n      return comp;\n    };\n\n    //\n\n    comp.resetProps(); // Apply all prop defaults\n    state._rerender = digest; // Expose digest method\n\n    return comp;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\n\nmodule.exports = function debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/debounce/index.js\n// module id = 1\n// module chunks = 0"],"sourceRoot":""}